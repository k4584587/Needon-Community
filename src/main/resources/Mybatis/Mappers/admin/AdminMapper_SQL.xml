<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="Admin">

<select id="getFindUser" parameterType="hashmap" resultType="Member">

	SELECT
		*
	FROM
		nb_member
	WHERE
	<if test='keyfield == "username"'>
		username like CONCAT('%',#{keyword},'%')
	</if>
	<if test='keyfield == "name"'>
		name like CONCAT('%',#{keyword},'%')
	</if>
	<if test='keyfield == "nick"'>
		nick like CONCAT('%',#{keyword},'%')
	</if>
	<if test='keyfield == "phone"'>
		phone like CONCAT('%',#{keyword},'%')
	</if>
	<if test='keyfield == "email"'>
		email like CONCAT('%',#{keyword},'%') 
	</if>
	<![CDATA[
		and no >=((#{page}-1)*#{limit}+1) and no <=(#{page}*#{limit})
		]]>
			
</select>

<select id="getFindListCount" parameterType="String" resultType="int">
	SELECT
		count(username)
	FROM
		nb_member
	WHERE 
	
	<if test='keyfield == "username"'>
		username like CONCAT('%',#{keyword},'%')
	</if>
	<if test='keyfield == "name"'>
		name like CONCAT('%',#{keyword},'%')
	</if>
	<if test='keyfield == "nick"'>
		nick like CONCAT('%',#{keyword},'%')
	</if>
	<if test='keyfield == "phone"'>
		phone like CONCAT('%',#{keyword},'%')
	</if>
	<if test='keyfield == "email"'>
		email like CONCAT('%',#{keyword},'%')
	</if>

</select>




</mapper>